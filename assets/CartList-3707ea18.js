import{g as re,c as le,a as ce,S as y}from"./sweetalert2-4c67a4a3.js";import{B as de,C as ue,E as pe,F as S,K as me,g as he,S as fe,h as _e,T as ge,i as be,j as ve,k as ye,V as we,l as Ce,m as Se,n as xe,p as ke,q as Pe,s as Ee,u as Ne,v as Te,x as $e,y as $,c as f,a,z as Be,A as Me,D as Le,G as Re,H as Ve,I as Ae,d as V,b as A,J as Ie,L as De,M as je,N as Fe,O as Oe,P as Ue,Q as He,U as ze,W as Ke,X as qe,Y as Xe,Z as We,$ as Ge,a0 as Je,a1 as Qe,a2 as Ye,a3 as Ze,a4 as et,a5 as tt,a6 as at,a7 as st,a8 as nt,a9 as ot,aa as it,ab as rt,ac as lt,ad as ct,ae as dt,af as ut,ag as pt,ah as mt,ai as ht,aj as ft,ak as _t,al as gt,am as bt,an as vt,ao as yt,ap as wt,aq as Ct,ar as St,as as xt,at as kt,au as Pt,av as Et,aw as Nt,ax as Tt,ay as $t,az as Bt,o as _,aA as Mt,aB as Lt,aC as Rt,aD as Vt,aE as At,aF as It,aG as Dt,aH as jt,aI as Ft,aJ as Ot,f as B,aK as Ut,r as I,aL as Ht,aM as zt,aN as Kt,aO as qt,aP as Xt,aQ as Wt,aR as Gt,aS as Jt,aT as Qt,aU as Yt,aV as Zt,aW as ea,aX as ta,t as b,aY as aa,aZ as sa,a_ as na,a$ as oa,b0 as ia,b1 as ra,b2 as la,b3 as ca,b4 as da,b5 as ua,b6 as pa,b7 as ma,b8 as ha,b9 as fa,ba as _a,bb as ga,bc as ba,bd as D,be as va,bf as ya,bg as wa,bh as Ca,bi as Sa,bj as xa,bk as ka,bl as Pa,bm as Ea,w as Na,bn as Ta,bo as j,bp as $a,bq as Ba,br as Ma,bs as La,_ as Ra}from"./index-5f2e3aeb.js";const Va=()=>{},Aa=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:de,Comment:ue,EffectScope:pe,Fragment:S,KeepAlive:me,ReactiveEffect:he,Static:fe,Suspense:_e,Teleport:ge,Text:be,Transition:ve,TransitionGroup:ye,VueElement:we,callWithAsyncErrorHandling:Ce,callWithErrorHandling:Se,camelize:xe,capitalize:ke,cloneVNode:Pe,compatUtils:Ee,compile:Va,computed:Ne,createApp:Te,createBlock:$e,createCommentVNode:$,createElementBlock:f,createElementVNode:a,createHydrationRenderer:Be,createPropsRestProxy:Me,createRenderer:Le,createSSRApp:Re,createSlots:Ve,createStaticVNode:Ae,createTextVNode:V,createVNode:A,customRef:Ie,defineAsyncComponent:De,defineComponent:je,defineCustomElement:Fe,defineEmits:Oe,defineExpose:Ue,defineProps:He,defineSSRCustomElement:ze,get devtools(){return Ke},effect:qe,effectScope:Xe,getCurrentInstance:We,getCurrentScope:Ge,getTransitionRawChildren:Je,guardReactiveProps:Qe,h:Ye,handleError:Ze,hydrate:et,initCustomFormatter:tt,initDirectivesForSSR:at,inject:st,isMemoSame:nt,isProxy:ot,isReactive:it,isReadonly:rt,isRef:lt,isRuntimeOnly:ct,isShallow:dt,isVNode:ut,markRaw:pt,mergeDefaults:mt,mergeProps:ht,nextTick:ft,normalizeClass:_t,normalizeProps:gt,normalizeStyle:bt,onActivated:vt,onBeforeMount:yt,onBeforeUnmount:wt,onBeforeUpdate:Ct,onDeactivated:St,onErrorCaptured:xt,onMounted:kt,onRenderTracked:Pt,onRenderTriggered:Et,onScopeDispose:Nt,onServerPrefetch:Tt,onUnmounted:$t,onUpdated:Bt,openBlock:_,popScopeId:Mt,provide:Lt,proxyRefs:Rt,pushScopeId:Vt,queuePostFlushCb:At,reactive:It,readonly:Dt,ref:jt,registerRuntimeCompiler:Ft,render:Ot,renderList:B,renderSlot:Ut,resolveComponent:I,resolveDirective:Ht,resolveDynamicComponent:zt,resolveFilter:Kt,resolveTransitionHooks:qt,setBlockTracking:Xt,setDevtoolsHook:Wt,setTransitionHooks:Gt,shallowReactive:Jt,shallowReadonly:Qt,shallowRef:Yt,ssrContextKey:Zt,ssrUtils:ea,stop:ta,toDisplayString:b,toHandlerKey:aa,toHandlers:sa,toRaw:na,toRef:oa,toRefs:ia,transformVNodeArgs:ra,triggerRef:la,unref:ca,useAttrs:da,useCssModule:ua,useCssVars:pa,useSSRContext:ma,useSlots:ha,useTransitionState:fa,vModelCheckbox:_a,vModelDynamic:ga,vModelRadio:ba,vModelSelect:D,vModelText:va,vShow:ya,version:wa,warn:Ca,watch:Sa,watchEffect:xa,watchPostEffect:ka,watchSyncEffect:Pa,withAsyncContext:Ea,withCtx:Na,withDefaults:Ta,withDirectives:j,withKeys:$a,withMemo:Ba,withModifiers:Ma,withScopeId:La},Symbol.toStringTag,{value:"Module"}));var M={},Ia={get exports(){return M},set exports(n){M=n}};const Da=re(Aa);(function(n,p){(function(x,r){n.exports=r(Da)})(le,m=>(()=>{var x={657:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=(s,d)=>{const w=s.__vccOpts||s;for(const[k,P]of d)w[k]=P;return w}},976:t=>{t.exports=m}},r={};function l(t){var i=r[t];if(i!==void 0)return i.exports;var s=r[t]={exports:{}};return x[t](s,s.exports,l),s.exports}l.d=(t,i)=>{for(var s in i)l.o(i,s)&&!l.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},l.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),l.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var v={};return(()=>{l.r(v),l.d(v,{Component:()=>E,LoadingPlugin:()=>ne,default:()=>oe,useLoading:()=>L});var t=l(976);function i(e){var o;typeof e.remove<"u"?e.remove():(o=e.parentNode)==null||o.removeChild(e)}function s(e,o,h){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const g=(0,t.h)(e,o,u),c=document.createElement("div");return c.classList.add("vld-container"),h.appendChild(c),(0,t.render)(g,c),g.component}function d(){return typeof window<"u"}const w=d()?window.HTMLElement:Object,k=["aria-busy"],P={class:"vl-icon"};function F(e,o,h,u,g,c){return(0,t.openBlock)(),(0,t.createBlock)(t.Transition,{name:e.transition},{default:(0,t.withCtx)(()=>[(0,t.withDirectives)((0,t.createElementVNode)("div",{tabindex:"0",class:(0,t.normalizeClass)(["vl-overlay vl-active",{"vl-full-page":e.isFullPage}]),"aria-busy":e.isActive,"aria-label":"Loading",style:(0,t.normalizeStyle)({zIndex:e.zIndex})},[(0,t.createElementVNode)("div",{class:"vl-background",onClick:o[0]||(o[0]=(0,t.withModifiers)(function(){return e.cancel&&e.cancel(...arguments)},["prevent"])),style:(0,t.normalizeStyle)(e.bgStyle)},null,4),(0,t.createElementVNode)("div",P,[(0,t.renderSlot)(e.$slots,"before"),(0,t.renderSlot)(e.$slots,"default",{},()=>[((0,t.openBlock)(),(0,t.createBlock)((0,t.resolveDynamicComponent)(e.loader),{color:e.color,width:e.width,height:e.height},null,8,["color","width","height"]))]),(0,t.renderSlot)(e.$slots,"after")])],14,k),[[t.vShow,e.isActive]])]),_:3},8,["name"])}const O={mounted(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn(e){if(!this.isActive||e.target===this.$el||this.$el.contains(e.target))return;let o=this.container?this.container:this.isFullPage?null:this.$el.parentElement;(this.isFullPage||o&&o.contains(e.target))&&(e.preventDefault(),this.$el.focus())}},beforeUnmount(){document.removeEventListener("focusin",this.focusIn)}},U=["width","height","stroke"],H=[(0,t.createStaticVNode)('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".25" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.8s" repeatCount="indefinite"></animateTransform></path></g></g>',1)];function z(e,o,h,u,g,c){return(0,t.openBlock)(),(0,t.createElementBlock)("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,stroke:e.color},H,8,U)}const K=(0,t.defineComponent)({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});var C=l(657);const q=(0,C.default)(K,[["render",z]]),X=["fill","width","height"],W=[(0,t.createStaticVNode)('<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',3)];function G(e,o,h,u,g,c){return(0,t.openBlock)(),(0,t.createElementBlock)("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:e.color,width:e.width,height:e.height},W,8,X)}const J=(0,t.defineComponent)({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}}),Q=(0,C.default)(J,[["render",G]]),Y=["height","width","fill"],Z=[(0,t.createStaticVNode)('<rect x="0" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect>',3)];function ee(e,o,h,u,g,c){return(0,t.openBlock)(),(0,t.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:e.height,width:e.width,fill:e.color},Z,8,Y)}const te=(0,t.defineComponent)({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}}),ae={Spinner:q,Dots:Q,Bars:(0,C.default)(te,[["render",ee]])},se=(0,t.defineComponent)({name:"VueLoading",mixins:[O],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,w],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:Boolean,transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},components:ae,emits:["hide","update:active"],data(){return{isActive:this.active}},mounted(){document.addEventListener("keyup",this.keyPress)},methods:{cancel(){!this.canCancel||!this.isActive||(this.hide(),this.onCancel.apply(null,arguments))},hide(){this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(()=>{const e=this.$el.parentElement;(0,t.render)(null,e),i(e)},150))},disableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vl-shown")},enableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vl-shown")},keyPress(e){e.keyCode===27&&this.cancel()}},watch:{active(e){this.isActive=e},isActive(e){e?this.disableScroll():this.enableScroll()}},computed:{bgStyle(){return{background:this.backgroundColor,opacity:this.opacity}}},beforeUnmount(){document.removeEventListener("keyup",this.keyPress)}}),E=(0,C.default)(se,[["render",F]]);function L(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{show(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;const c={...e,...h,...{programmatic:!0,lockScroll:!0,isFullPage:!1,active:!0}};let R=c.container;c.container||(R=document.body,c.isFullPage=!0);const ie={...o,...u};return{hide:s(E,c,R,ie).ctx.hide}}}}const ne=function(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const u=L(o,h);e.config.globalProperties.$loading=u,e.provide("$loading",u)},oe=E})(),v})())})(Ia);const ja=ce(M);const{VITE_APP_URL:N,VITE_APP_PATH:T}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"sasimi",BASE_URL:"/vue-main-week6/",MODE:"production",DEV:!1,PROD:!0},Fa={data(){return{isLoading:!1,cart:{},selectProductId:"",loadingItem:""}},methods:{getCarts(){this.isLoading=!0,this.$http.get(`${N}/api/${T}/cart`).then(n=>{this.cart=n.data.data,this.isLoading=!1}).catch(n=>{y.fire({icon:"error",title:`錯誤 ${n.status}`,text:n.data.message,confirmButtonText:"OK"})})},updateCartItem(n){const p={product_id:n.product_id,qty:n.qty};this.loadingItem=n.id,this.$http.put(`${N}/api/${T}/cart/${n.id}`,{data:p}).then(m=>{this.getCarts(),this.loadingItem="",y.fire({icon:"success",title:`${m.status===200?"成功":"失敗"}`,text:m.data.message,confirmButtonText:"OK"})}).catch(m=>{y.fire({icon:"error",title:`錯誤 ${m.status}`,text:m.data.message,confirmButtonText:"OK"})})},deleteCartItem(n){this.loadingItem=n.id,this.$http.delete(`${N}/api/${T}/cart/${n.id}`).then(p=>{this.getCarts(),this.loadingItem="",y.fire({icon:"success",title:`${p.status===200?"成功":"失敗"}`,text:p.data.message,confirmButtonText:"OK"})}).catch(p=>{y.fire({icon:"error",title:`錯誤 ${p.status}`,text:p.data.message,confirmButtonText:"OK"})})}},components:{Loading:ja},mounted(){this.getCarts()}},Oa=a("h1",{class:"text-center"},"這是前台購物車列表",-1),Ua={key:0,class:"text-center"},Ha={key:1,class:"table align-middle"},za=a("thead",null,[a("tr",null,[a("th"),a("th",{class:"text-center"},"品名"),a("th",{class:"text-center",style:{width:"150px"}},"數量/單位"),a("th",{class:"text-center"},"單價"),a("th",{class:"text-center"},"小計")])],-1),Ka=["disabled","onClick"],qa={key:0,class:"fas fa-spinner fa-pulse"},Xa={class:"input-group input-group-sm"},Wa=["onUpdate:modelValue","disabled","onChange"],Ga=["value"],Ja={class:"text-end"},Qa={class:"text-end"},Ya=a("td",{colspan:"4",class:"text-end"},"總計",-1),Za={class:"text-end"},es=a("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),ts={class:"text-end text-success"};function as(n,p,m,x,r,l){var t,i;const v=I("Loading");return _(),f(S,null,[A(v,{active:r.isLoading,"can-cancel":!0,"is-full-page":n.fullPage},null,8,["active","is-full-page"]),Oa,(i=(t=r.cart)==null?void 0:t.carts)!=null&&i.length?(_(),f("table",Ha,[za,a("tbody",null,[r.cart.carts?(_(!0),f(S,{key:0},B(r.cart.carts,s=>(_(),f("tr",{key:s.id},[a("td",null,[a("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:s.id===r.loadingItem,onClick:d=>l.deleteCartItem(s)},[s.id===r.loadingItem?(_(),f("i",qa)):$("",!0),V(" x ")],8,Ka)]),a("td",null,b(s.product.title),1),a("td",null,[a("div",Xa,[j(a("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":d=>s.qty=d,disabled:s.id===r.loadingItem,onChange:d=>l.updateCartItem(s)},[(_(),f(S,null,B(20,d=>a("option",{value:d,key:d+"123456"},b(d),9,Ga)),64))],40,Wa),[[D,s.qty]])])]),a("td",Ja,b(s.product.price),1),a("td",Qa,b(s.total),1)]))),128)):$("",!0)]),a("tfoot",null,[a("tr",null,[Ya,a("td",Za,b(r.cart.total),1)]),a("tr",null,[es,a("td",ts,b(r.cart.final_total),1)])])])):(_(),f("h3",Ua,"目前購物車沒有商品"))],64)}const hs=Ra(Fa,[["render",as]]);export{hs as default};
